// ========================================
// Table of Contents (TOC) 스타일
// ========================================

// TOC 컨테이너
.toc-container {
    position: fixed;
    top: 100px; // 헤더 아래 여백
    right: 5px; // 본문에 더 가깝게 (25px → 5px)
    width: 180px; // 기본 너비
    max-height: calc(100vh - 140px);
    overflow-y: auto;
    background: rgba(255, 255, 255, 0.5) !important; // 반투명 흰색 배경
    backdrop-filter: blur(5px); // 블러 효과
    border: 1px solid rgba(225, 228, 232, 0.8);
    border-radius: 6px;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
    z-index: 1000;
    padding: 8px; // 패딩 축소 (12px → 8px)
    font-size: 13px; // 기본 폰트 크기 축소 (14px → 13px)
    line-height: 1.1; // 줄 간격 더 축소 (1.3 → 1.1)
    transition: none !important; // 전환 효과 제거

    // 모바일에서는 숨김
    display: none;

    // 데스크톱에서만 표시 (768px 이상)
    @media (min-width: 768px) {
        display: block;
    }

    // 중간 크기 화면에서 크기와 위치 조정
    @media (min-width: 768px) and (max-width: 1200px) {
        right: 15px; // 여백 줄임
        width: 160px; // 너비 줄임
    }

    // 작은 데스크톱에서 더 작게
    @media (min-width: 768px) and (max-width: 1024px) {
        right: 10px; // 여백 더 줄임
        width: 140px; // 너비 더 줄임
        font-size: 12px; // 폰트 크기 축소
    }

    // 숨겨진 상태 (기본 상태)
    &.collapsed {
        width: 48px; // 버튼 크기에 맞춤
        height: 48px; // 버튼 크기에 맞춤
        padding: 8px; // 패딩
        overflow: hidden; // 오버플로우 숨김
        background: transparent !important; // 완전 투명
        border: none; // 테두리 제거
        box-shadow: none; // 그림자 제거

        .toc-title,
        .toc-list {
            display: none !important; // 완전히 숨김
            visibility: hidden; // 추가로 숨김
            opacity: 0; // 투명도 0
        }

        .toc-toggle {
            position: absolute; // 위치 고정
            top: 8px; // 위치 고정
            right: 8px; // 위치 고정
            width: 32px; // 크기 고정
            height: 32px; // 크기 고정
            background: rgba(226, 226, 226, 0.7); // 통일된 색상
            border: 1px solid rgba(225, 228, 232, 0.6); // 통일된 색상
            border-radius: 3px; // 둥근 모서리
            padding: 0; // 패딩 제거
            font-size: 12px; // 폰트 크기
            color: rgba(36, 41, 46, 0.7); // 통일된 색상
            font-weight: 500;
            cursor: pointer;
            display: flex; // flex로 변경
            align-items: center;
            justify-content: center;
            transition: none !important; // 전환 효과 제거
            user-select: none; // 텍스트 선택 방지
            -webkit-user-select: none; // Safari 지원
            -moz-user-select: none; // Firefox 지원
            -ms-user-select: none; // IE 지원
        }
    }


    // 스크롤바 스타일링
    &::-webkit-scrollbar {
        width: 4px; // 스크롤바 너비 축소 (6px → 4px)
    }

    &::-webkit-scrollbar-track {
        background: rgba(241, 241, 241, 0.5);
        border-radius: 2px;
    }

    &::-webkit-scrollbar-thumb {
        background: rgba(193, 193, 193, 0.8);
        border-radius: 2px;

        &:hover {
            background: rgba(168, 168, 168, 1);
        }
    }
}

// TOC 토글 버튼 (펼친 상태)
.toc-toggle {
    position: absolute;
    top: 8px;
    right: 8px;
    width: 32px; // 버튼 크기 고정
    height: 32px; // 버튼 크기 고정
    background: rgba(226, 226, 226, 0.7); // 통일된 색상
    border: 1px solid rgba(225, 228, 232, 0.6); // 통일된 색상
    border-radius: 3px;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: none !important; // 전환 효과 제거
    z-index: 1001;
    font-size: 12px; // 폰트 크기
    color: rgba(36, 41, 46, 0.7); // 통일된 색상
    font-weight: 500;
    user-select: none; // 텍스트 선택 방지
    -webkit-user-select: none; // Safari 지원
    -moz-user-select: none; // Firefox 지원
    -ms-user-select: none; // IE 지원

}

// TOC 제목 (숨김)
.toc-title {
    display: none; // 제목 숨김
}

// TOC 목록
.toc-list {
    list-style: none;
    margin: 0;
    padding: 0;
    padding-top: 40px; // 토글 버튼과 겹치지 않도록 상단 여백 증가 (30px → 40px)
    transition: none !important; // 전환 효과 제거

    ul {
        list-style: none;
        margin: 0;
        padding-left: 0; // 기본 들여쓰기 제거
    }
}

// TOC 항목
.toc-item {
    margin: 1px 0; // 상하 여백 더 축소 (2px → 1px)

    a {
        display: block;
        padding: 3px 4px; // 패딩 축소 (3px 6px → 3px 4px)
        color: #586069;
        text-decoration: none;
        border-radius: 3px;
        transition: none !important; // 전환 효과 제거
        white-space: nowrap; // 텍스트 줄바꿈 방지
        overflow: hidden; // 넘치는 텍스트 숨김
        text-overflow: ellipsis; // 말줄임표 표시

        &:hover {
            background-color: transparent;
            color: #586069;
        }

        &.active {
            background-color: rgba(3, 102, 214, 0.9);
            color: #fff;
            font-weight: 500;
        }
    }
}

// TOC 레벨별 들여쓰기 및 스타일
.toc-item.level-1 {
    font-weight: 500;
    margin-left: 0; // 레벨 1은 들여쓰기 없음

    a {
        font-size: 14px; // 레벨 1 폰트 크기
        font-weight: 700; // 가장 굵은 글씨
        color: #24292e; // 가장 진한 색상

        &.active {
            background-color: rgba(3, 102, 214, 0.9);
            color: #fff;
            font-weight: 700;
        }
    }
}

.toc-item.level-2 {
    margin-left: 8px; // 레벨 2 들여쓰기

    a {
        font-size: 13px; // 레벨 2 폰트 크기 (14px → 13px)
        font-weight: 600; // 중간 굵기 (700 → 600)
        color: #586069; // 약간 연한 색상 (#24292e → #586069)

        &.active {
            background-color: rgba(3, 102, 214, 0.9);
            color: #fff;
            font-weight: 600;
        }
    }
}

.toc-item.level-3 {
    margin-left: 16px; // 레벨 3 들여쓰기

    a {
        font-size: 12px; // 레벨 3 폰트 크기 (13px → 12px)
        font-weight: 500; // 보통 굵기 (600 → 500)
        color: #6a737d; // 더 연한 색상 (#586069 → #6a737d)

        &.active {
            background-color: rgba(3, 102, 214, 0.9);
            color: #fff;
            font-weight: 500;
        }
    }
}

.toc-item.level-4 {
    margin-left: 24px; // 레벨 4 들여쓰기 (16px → 24px)

    a {
        font-size: 11px; // 레벨 4 폰트 크기 (12px → 11px)
        font-weight: 400; // 가장 얇은 굵기 (500 → 400)
        color: #8b949e; // 가장 연한 색상 (#6a737d → #8b949e)

        &.active {
            background-color: rgba(3, 102, 214, 0.9);
            color: #fff;
            font-weight: 400;
        }
    }
}

// 포스트 본문에 TOC가 있을 때만 여백 조정 (원래대로 복원)
.post-content.has-toc {
    @media (min-width: 768px) {
        margin-right: 0; // TOC 공간 제거 (원래대로)
    }
}

// 숨겨진 상태일 때는 여백 제거
.post-content.has-toc-collapsed {
    @media (min-width: 768px) {
        margin-right: 0; // 여백 제거
    }
}
