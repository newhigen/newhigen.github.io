// ========================================
// 포스트 본문 스타일
// ========================================

@import 'variables';

// 포스트 컨테이너
.post {
  max-width: 600px; // 기본 너비
  margin: 0 auto;
  padding: 0 20px;

  // 모바일에서 좌우 여백 거의 없애기
  @media screen and (max-width: $breakpoint-mobile) {
    padding: 0;
    margin: 0 -5px; // 음수 마진으로 더 넓게
  }

  // 데스크톱(비모바일)에서 본문 폭 넓히기
  @media screen and (min-width: $breakpoint-desktop) {
    max-width: 720px;
  }
}

// 포스트 본문 컨테이너
.post-content {
  margin-top: 10px; // 헤더와 본문 사이 간격 줄이기
  margin-bottom: $spacing-xxl;
  font-family: $font-family-post-content;
  max-width: 100%;
  font-size: 0.9rem; // 기본 글씨 크기 (모든 화면 크기에서 일관되게)
  // 긴 토큰(긴 URL, 긴 단어, 인라인 코드 등)로 인한 가로 오버플로우 방지
  overflow-wrap: anywhere;
  word-break: break-word;
  hyphens: auto;

  // 본문 내의 모든 텍스트 요소에 content 폰트와 크기 적용
  p,
  li,
  blockquote,
  em,
  i,
  span,
  div {
    font-family: $font-family-post-content;
    font-size: 0.9rem; // 기본 글씨 크기
    line-height: 1.6; // line-height 약간 키우기 (1.5 → 1.6)
  }

  // PC에서 본문 글씨 크기 (모바일 제외) - 더 줄임
  @media screen and (min-width: $breakpoint-desktop) {
    font-size: 1.0rem; // 1.1rem → 1.0rem으로 더 줄임

    p,
    li,
    blockquote,
    em,
    i,
    span,
    div {
      font-size: 1.0rem; // 1.1rem → 1.0rem으로 더 줄임
    }
  }

  // 모바일에서 본문 글씨 크기 (기본과 동일하게 유지)
  @media screen and (max-width: $breakpoint-mobile) {
    font-size: 0.9rem;

    p,
    li,
    blockquote,
    em,
    i,
    span,
    div {
      font-size: 0.9rem;
    }
  }

  // paragraph 간격 늘리기
  p {
    margin-bottom: 0.8em; // 기본 paragraph 간격 늘리기
  }

  // 연속된 paragraph 간격 늘리기
  p+p {
    margin-top: 0.6em; // 연속 paragraph 간격 늘리기
  }

  // bold 텍스트만 SemiBold 폰트 적용
  strong,
  b {
    font-family: $font-family-post-content-bold;
  }

  // my 태그는 글씨 크기를 약간 줄이기
  my {
    font-size: 0.9em; // 일반 텍스트보다 약간 작게
  }
}



// 포스트 제목
.post-title {
  font-size: 1.9rem; // 제목 크기 더 줄이기 (2.2rem → 1.9rem)
  font-weight: 700;
  margin-bottom: $spacing-lg;
  text-align: center;
  color: $text-color;

  // 모바일에서 제목 크기 줄이기
  @media screen and (max-width: $breakpoint-mobile) {
    font-size: 1.6rem; // 모바일에서도 크기 더 줄이기 (1.8rem → 1.6rem)
    margin-bottom: $spacing-md;
  }

  // PC에서 제목 크기 줄이기
  @media screen and (min-width: $breakpoint-desktop) {
    font-size: 1.9rem; // PC에서도 크기 더 줄이기 (2.2rem → 1.9rem)
  }
}

// 포스트 본문의 모든 제목들 (기본 스타일)
.post-content h1,
.post-content h2,
.post-content h3,
.post-content h4,
.post-content h5,
.post-content h6 {
  line-height: 1.3;
  font-family: $font-family-post-headers;
}

// h1 제목 (가장 큰 위/아래 간격)
.post-content h1 {
  margin-top: 35px; // 위 간격 줄이기 (50px → 35px)
  margin-bottom: 25px; // 아래 간격 넓히기 (5px → 25px)
  font-size: 1.6rem; // H1 크기 더 줄이기 (1.8rem → 1.6rem)
  font-family: $font-family-post-headers;

  // 모바일에서 글씨 크기와 간격 줄이기
  @media screen and (max-width: $breakpoint-mobile) {
    font-size: 1.3rem; // 모바일에서도 크기 더 줄이기 (1.5rem → 1.3rem)
    font-weight: 600; // 모바일에서 약간 더 진하게
    margin-top: 30px; // 모바일에서 위 간격 약간 추가 (25px → 30px)
    margin-bottom: 20px; // 모바일에서 아래 간격 넓히기 (10px → 20px)
  }

  @media screen and (min-width: $breakpoint-desktop) {
    font-size: 1.6rem; // 데스크톱에서도 크기 더 줄이기 (1.8rem → 1.6rem)
  }
}

// h2 제목 (중간 위/아래 간격)
.post-content h2 {
  margin-top: 25px; // 위 간격 줄이기 (40px → 25px)
  margin-bottom: 20px; // 아래 간격 줄이기 (28px → 20px)
  font-size: 1.3rem; // H2 크기 더 줄이기 (1.5rem → 1.3rem)
  font-family: $font-family-post-headers;

  // 모바일에서 글씨 크기와 간격 줄이기
  @media screen and (max-width: $breakpoint-mobile) {
    font-size: 1.1rem; // 모바일에서도 크기 더 줄이기 (1.3rem → 1.1rem)
    font-weight: 600; // 모바일에서 약간 더 진하게
    margin-top: 24px; // 모바일에서 위 간격 약간 추가 (20px → 24px)
    margin-bottom: 15px; // 모바일에서도 아래 간격 줄이기 (18px → 15px)
  }

  @media screen and (min-width: $breakpoint-desktop) {
    font-size: 1.3rem; // 데스크톱에서도 크기 더 줄이기 (1.5rem → 1.3rem)
  }
}

// h3 제목 (작은 위/아래 간격)
.post-content h3 {
  margin-top: 35px; // 위 간격 줄이기 (42px → 35px)
  margin-bottom: 15px; // 아래 간격 줄이기 (21px → 15px)
  font-size: 1.1rem; // H3 크기 더 줄이기 (1.3rem → 1.1rem)
  font-family: $font-family-post-headers;

  // 모바일에서 글씨 크기와 간격 줄이기
  @media screen and (max-width: $breakpoint-mobile) {
    font-size: 1rem; // 모바일에서도 크기 더 줄이기 (1.1rem → 1rem)
    font-weight: 600; // 모바일에서 약간 더 진하게
    margin-top: 30px; // 모바일에서 위 간격 약간 추가 (25px → 30px)
    margin-bottom: 12px; // 모바일에서도 아래 간격 줄이기 (15px → 12px)
  }

  @media screen and (min-width: $breakpoint-desktop) {
    font-size: 1.1rem; // 데스크톱에서도 크기 더 줄이기 (1.3rem → 1.1rem)
  }
}

// h4 제목
.post-content h4 {
  margin-top: 30px;
  margin-bottom: 12px;
  font-size: 1rem; // H4 크기 줄이기 (1.1rem → 1rem)
  font-family: $font-family-post-headers;

  @media screen and (max-width: $breakpoint-mobile) {
    font-size: 0.95rem; // 모바일에서도 크기 줄이기 (1rem → 0.95rem)
    font-weight: 600; // 모바일에서 약간 더 진하게
    margin-top: 24px; // 모바일에서 위 간격 약간 추가 (20px → 24px)
    margin-bottom: 10px;
  }

  @media screen and (min-width: $breakpoint-desktop) {
    font-size: 1rem; // 데스크톱에서도 크기 줄이기 (1.1rem → 1rem)
  }
}

// h5 제목
.post-content h5 {
  margin-top: 25px;
  margin-bottom: 10px;
  font-size: 0.95rem; // H5 크기 줄이기 (1rem → 0.95rem)
  font-family: $font-family-post-headers;

  @media screen and (max-width: $breakpoint-mobile) {
    font-size: 0.9rem; // 모바일에서도 크기 줄이기 (0.95rem → 0.9rem)
    font-weight: 600; // 모바일에서 약간 더 진하게
    margin-top: 22px; // 모바일에서 위 간격 약간 추가 (18px → 22px)
    margin-bottom: 8px;
  }

  @media screen and (min-width: $breakpoint-desktop) {
    font-size: 0.95rem; // 데스크톱에서도 크기 줄이기 (1rem → 0.95rem)
  }
}

// h6 제목
.post-content h6 {
  margin-top: 20px;
  margin-bottom: 8px;
  font-size: 0.9rem; // H6 크기 줄이기 (0.95rem → 0.9rem)
  font-family: $font-family-post-headers;

  @media screen and (max-width: $breakpoint-mobile) {
    font-size: 0.85rem; // 모바일에서도 크기 줄이기 (0.9rem → 0.85rem)
    font-weight: 600; // 모바일에서 약간 더 진하게
    margin-top: 20px; // 모바일에서 위 간격 약간 추가 (15px → 20px)
    margin-bottom: 6px;
  }

  @media screen and (min-width: $breakpoint-desktop) {
    font-size: 0.9rem; // 데스크톱에서도 크기 줄이기 (0.95rem → 0.9rem)
  }
}

// 포스트 헤더 (제목, 메타 정보)
.post-header {
  margin-bottom: 0px;
  padding-bottom: 0px;
  text-align: center;
}

// 포스트 제목과 카테고리 태그 컨테이너
.post-title-container {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: $spacing-md;
}

// 카테고리 태그 - 적당한 크기와 색상 (포스트 헤더 포함)
.category-tag,
.post-header .category-tag {
  font-size: 0.9rem !important; // 0.8rem → 0.9rem으로 약간 크게
  color: #64748b !important; // 약간 더 진한 회색
  background-color: #f1f5f9 !important; // 약간 더 진한 배경
  padding: 5px 10px !important; // 패딩도 약간 크게
  border-radius: 4px !important; // 둥근 모서리 유지
  font-weight: 400 !important; // 폰트 굵기도 약간 진하게
  border: 1px solid rgba(100, 116, 139, 0.15) !important; // 약간 더 진한 테두리
}

// 포스트 메타 정보 (날짜, 저자 등)
.post-meta {
  font-size: 14px;
  color: $muted-color;
  display: inline-block;
  width: 50px;
  text-align: right;

  .bullet-divider {
    padding-inline: $spacing-lg;
  }

  .meta-label {
    font-weight: 600;
  }

  .force-inline {
    display: inline;

    &::before {
      content: "•";
      padding-inline: $spacing-sm;
    }
  }

  .post-authors {
    margin-top: $spacing-sm;
  }
}

// 포스트 헤더의 메타 정보
.post-header .post-meta {
  display: block;
  width: auto;
  text-align: center;
  white-space: nowrap;
}

// 포스트 날짜 (맨 위 오른쪽)
.post-date-top {
  text-align: right;
  font-size: 0.9rem;
  color: $secondary-color;
  position: relative;
  z-index: 20; // 네비게이션보다 위에 표시

  .meta-label {
    color: $secondary-color;
    font-weight: 500;
  }

  // 모바일에서 네비게이션과 겹치지 않도록 위치 조정
  @media screen and (max-width: $breakpoint-mobile) {
    margin-top: 10px;
    margin-right: 10px;
  }
}

// 책 상세 정보 (책 카테고리인 경우)
.book-details {
  margin-bottom: $spacing-md;
}

// 포스트 메타 상세 정보
.post-meta-details {
  font-size: 0.9rem;
  color: $muted-color;
  margin-top: -$spacing-sm;
  margin-bottom: $spacing-md;
}

// 코드 블록 스타일
.post-content pre {
  background-color: $lighter-gray;
  padding: $spacing-md;
  border-radius: $border-radius;
  overflow-x: auto;
  max-width: 100%;
  margin: $spacing-lg 0;
  border: 1px solid $light-gray;

  code {
    background-color: transparent;
    padding: 0;
    border-radius: 0;
    font-size: 0.9em;
  }
}

// Rouge 하이라이터 래퍼가 pre 외곽으로 넘치지 않도록 처리
.post-content .highlighter-rouge,
.post-content .highlight {
  overflow-x: auto;
  -webkit-overflow-scrolling: touch;
}

// 인라인 코드 스타일
.post-content code:not(pre code) {
  background-color: $lighter-gray;
  padding: 2px 4px;
  border-radius: $border-radius-sm;
  font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
  font-size: 0.9em;
}

// 인용문 스타일
.post-content blockquote {
  margin: $spacing-lg 0;
  padding: $spacing-sm $spacing-md;
  border-left: 4px solid $light-gray;
  background-color: $lightest-gray;
  font-style: italic;
  color: $muted-color;

  p {
    margin: 0;
  }
}

// 목록 스타일
.post-content ul,
.post-content ol {
  margin: $spacing-lg 0;
  padding-left: $spacing-xl;

  li {
    margin-bottom: 2px; // 리스트 아이템 간격 줄이기 (기존 $spacing-sm → 2px)
    line-height: 1.6;

    // li 내부 문단의 추가 간격을 줄여 전체 간격 축소
    >p {
      margin: 0.2em 0;
    }
  }
}

// 문단 바로 다음에 오는 리스트의 위 간격을 아이템 간격(2px)과 동일하게
.post-content p+ul,
.post-content p+ol {
  margin-top: 2px;
}

// 문단 바로 다음에 리스트가 오는 경우, 문단의 아래 간격도 2px로 축소
// (마진 겹침을 고려하여 p와 ul/ol 모두 2px로 설정)
.post-content p:has(+ ul),
.post-content p:has(+ ol) {
  margin-bottom: 2px;
}

// 리스트 아이템 내부에서 문단 다음에 오는 중첩 리스트도 동일 규칙 적용
.post-content li>p+ul,
.post-content li>p+ol {
  margin-top: 2px;
}

.post-content li>p:has(+ ul),
.post-content li>p:has(+ ol) {
  margin-bottom: 2px;
}

// 어떤 요소 뒤에 오든, 중첩 리스트 자체의 기본 위/아래 간격 축소
.post-content li>ul,
.post-content li>ol {
  margin-top: 2px;
  margin-bottom: 2px;
}

// 테이블 스타일
.post-content table {
  // 표가 본문 너비를 밀어내지 않도록 가로 스크롤 허용
  width: 100%;
  display: block;
  overflow-x: auto;
  -webkit-overflow-scrolling: touch;
  border-collapse: collapse;
  margin: $spacing-lg 0;
  font-size: 0.9em;

  th,
  td {
    padding: $spacing-sm $spacing-md;
    text-align: left;
    border-bottom: 1px solid $light-gray;
    word-break: break-word;
    overflow-wrap: anywhere;
  }

  th {
    background-color: $lighter-gray;
    font-weight: 600;
  }
}

// 임베디드 미디어가 본문 너비를 넘지 않도록 제한
.post-content iframe,
.post-content video,
.post-content embed {
  max-width: 100%;
}

// 수평선 스타일
.post-content hr {
  border: none;
  border-top: 1px solid $light-gray;
  margin: $spacing-xl 0;
}

// 강조 텍스트 스타일
.post-content strong,
.post-content b {
  font-weight: 600;
  font-family: $font-family-post-content-bold;
}

// 이탤릭 텍스트 스타일
.post-content em,
.post-content i {
  font-style: italic;
}

// 작은 텍스트 스타일
.post-content small {
  font-size: 0.8em;
  color: $muted-color;
}

// 삭제된 텍스트 스타일
.post-content del {
  text-decoration: line-through;
  color: $muted-color;
}

// 인용 스타일
.post-content cite {
  font-style: italic;
  color: $muted-color;
}

// 정의 목록 스타일
.post-content dl {
  margin: $spacing-lg 0;

  dt {
    font-weight: 600;
    margin-bottom: $spacing-sm;
  }

  dd {
    margin-left: $spacing-md;
    margin-bottom: $spacing-sm;
  }
}

// 각주 스타일
.post-content .footnotes {
  font-size: 0.9em;
  color: $muted-color;
  margin-top: $spacing-xl;
  padding-top: $spacing-lg;
  border-top: 1px solid $light-gray;

  a {
    color: $muted-color;
  }

  ol {
    list-style-type: none;
    counter-reset: footnote-counter;
    padding-left: 0;
  }

  li {
    counter-increment: footnote-counter;
    margin-bottom: $spacing-sm;

    &::before {
      content: "[" counter(footnote-counter) "]";
      margin-right: $spacing-md;
    }
  }

  p {
    display: inline;
  }
}

// 이미지 스타일 (그림자 효과)
.post-content img {
  max-width: 70%; // 원본 크기의 70%로 축소
  height: auto;
  display: block;
  margin: 20px auto;
  border: 1px solid #e5e7eb;

  // 모바일에서는 80%로 설정하여 화면에 맞게
  @media screen and (max-width: $breakpoint-mobile) {
    max-width: 80%;
    border: 1px solid #e5e7eb;
    margin: 15px auto;
  }

  // 태블릿에서는 75%
  @media screen and (min-width: $breakpoint-mobile) and (max-width: $breakpoint-desktop) {
    max-width: 75%;
  }
}

// 커스텀 강조 요소들
.post-content emphasis {
  display: inline; // 인라인 요소로 고정하여 줄바꿈 방지
  padding: 0; // 수평 패딩 제거: 줄바꿈 유발 폭 증가 방지
  background-color: #fff9c4;
  border-radius: $border-radius-sm;
  -webkit-box-decoration-break: clone; // 줄바꿈 시 배경/모서리 끊김 없이 복제
  box-decoration-break: clone;
}

// 강조 뒤에 단어가 붙을 때 줄바꿈 방지용 Word Joiner(U+2060) 삽입
.post-content emphasis::after {
  content: "\2060";
}

.post-content best {
  background-color: #ffe3e3;
  border-radius: $border-radius-sm;
}

.post-content subtitle {
  margin-left: $spacing-sm;
  font-size: 1.0rem;
  font-weight: bold;
  color: $muted-color;
}

.post-content big_dots_for_extra {
  display: block;
  margin-top: $spacing-xl;
  font-size: 2rem;
  color: $muted-color;
}

.post-content my {
  color: #099268;
}
