<!-- ========================================
   사이트 헤더 (네비게이션)
   ======================================== -->

{% assign default_mode = 'writing' %}
{% if page.url contains '/projects/' or page.url contains '/technology/' or page.url contains '/tools/' %}
{% assign default_mode = 'tech' %}
{% endif %}

<header class="site-header" data-default-mode="{{ default_mode }}" data-writing-home="{{ '/' | relative_url }}"
  data-tech-home="{{ '/technology/' | relative_url }}">

  <div class="wrapper">
    <!-- ========================================
        1. 네비게이션 페이지 목록 준비
        ======================================== -->

    {%- assign default_paths = site.pages | map: "path" -%}
    {%- assign page_paths = site.header_pages | default: default_paths -%}
    {%- assign titles_size = site.pages | map: 'title' | join: '' | size -%}

    <!-- ========================================
        2. 네비게이션 메뉴 (페이지가 있는 경우만)
        ======================================== -->

    {%- if titles_size > 0 -%}
    <nav class="site-nav">
      <!-- ========================================
            2-1. 모바일 메뉴 토글 버튼
            ======================================== -->

      <input type="checkbox" id="nav-trigger" class="nav-trigger" />
      <label for="nav-trigger">
        <span class="menu-icon">
          <svg viewBox="0 0 18 15" width="18px" height="15px">
            <path
              d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z" />
          </svg>
        </span>
      </label>

      <!-- ========================================
            2-2. 네비게이션 메뉴 그룹
            ======================================== -->

      <div class="trigger">
        <!-- 왼쪽 메뉴 그룹 -->
        <div class="nav-group-left">
          <a class="page-link home-link icon-with-label{% if page.url == '/' or page.url == '/technology/' %} active{% endif %}"
            href="{% if default_mode == 'tech' %}{{ '/technology/' | relative_url }}{% else %}{{ '/' | relative_url }}{% endif %}"
            title="Home" aria-label="Home">
            <span class="home-icon" aria-hidden="true">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                stroke-linecap="round" stroke-linejoin="round">
                <path d="M3 10.5 12 3l9 7.5" />
                <path d="M5 10v10a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1V10" />
              </svg>
            </span>
            <span class="caption">홈</span>
          </a>
          <a class="page-link search-icon icon-with-label" title="검색" aria-label="검색">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
              stroke-linecap="round" stroke-linejoin="round">
              <circle cx="11" cy="11" r="8"></circle>
              <path d="m21 21-4.35-4.35"></path>
            </svg>
            <span class="caption">검색</span>
          </a>
          <a class="page-link about-link icon-with-label{% if page.url contains '/about/' %} active{% endif %}"
            href="{{ '/about/' | relative_url }}" title="About" aria-label="About">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
              stroke-linecap="round" stroke-linejoin="round">
              <circle cx="12" cy="8" r="4" />
              <path d="M6 20c0-3.314 2.686-6 6-6s6 2.686 6 6" />
            </svg>
            <span class="caption">About</span>
          </a>
        </div>

        <!-- 중앙 메뉴 그룹 (모드별 스위칭) -->
        <div class="nav-group-center nav-center--writing">
          <div class="nav-categories">
            <a class="page-link{% if page.url contains '/thought/' %} active{% endif %}"
              href="{{ '/thought/' | relative_url }}"><i class="fa-solid fa-tag" aria-hidden="true"></i><span
                class="label">생각</span></a>
            <a class="page-link{% if page.url contains '/representation/' %} active{% endif %}"
              href="{{ '/representation/' | relative_url }}"><i class="fa-solid fa-tag" aria-hidden="true"></i><span
                class="label">모형</span></a>
            <a class="page-link{% if page.url contains '/book/' %} active{% endif %}"
              href="{{ '/book/' | relative_url }}"><i class="fa-solid fa-tag" aria-hidden="true"></i><span
                class="label">책</span></a>
          </div>
        </div>
        <div class="nav-group-center nav-center--tech">
          <div class="nav-categories">
            <a class="page-link{% if page.url contains '/projects/' %} active{% endif %}"
              href="{{ '/projects/' | relative_url }}"><i class="fa-solid fa-tag" aria-hidden="true"></i><span
                class="label">Projects</span></a>
            <a class="page-link{% if page.url contains '/tools/' %} active{% endif %}"
              href="{{ '/tools/' | relative_url }}"><i class="fa-solid fa-tag" aria-hidden="true"></i><span
                class="label">Tools</span></a>
          </div>
        </div>

        <!-- 오른쪽 메뉴 그룹 -->
        <div class="nav-group-right">
          <div class="mode-toggle-container" role="group" aria-label="Mode toggle">
            <div class="mode-toggle-wrapper">
              <!-- 왼쪽 레이블: 글쓰기 -->
              <span class="mode-label" data-mode="writing">
                <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                  stroke-linecap="round" stroke-linejoin="round">
                  <path d="M17 3a2.828 2.828 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z" />
                </svg>
                글쓰기
              </span>

              <!-- 가운데 토글 스위치 -->
              <button class="center-toggle-switch" aria-label="모드 전환">
                <div class="toggle-knob"></div>
              </button>

              <!-- 오른쪽 레이블: 테크 -->
              <span class="mode-label" data-mode="tech">
                <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                  stroke-linecap="round" stroke-linejoin="round">
                  <path
                    d="M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z" />
                </svg>
                테크
              </span>
            </div>
          </div>
        </div>
      </div>
    </nav>
    {%- endif -%}
  </div>
</header>
